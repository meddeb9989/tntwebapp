<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="">
        <meta name="author" content="">

        <title>Control-M</title>

        <!-- Bootstrap Core CSS -->
        <link href="{{STATIC_ADMIN_URL}}/css/bootstrap.min.css" rel="stylesheet">

        <!-- MetisMenu CSS -->
        <link href="{{STATIC_ADMIN_URL}}/css/metisMenu.min.css" rel="stylesheet">

        <!-- Timeline CSS -->
        <link href="{{STATIC_ADMIN_URL}}/css/timeline.css" rel="stylesheet">

        <!-- Custom CSS -->
        <link href="{{STATIC_ADMIN_URL}}/css/startmin.css" rel="stylesheet">

        <!-- Morris Charts CSS -->
        <link href="{{STATIC_ADMIN_URL}}/css/morris.css" rel="stylesheet">

        <!-- Style CSS -->
        <link href="{{STATIC_ADMIN_URL}}/css/addform/style.css" rel="stylesheet">



        <!-- Timepicker CSS -->
        <link href="{{STATIC_ADMIN_URL}}/css/addform/bootstrap-timepicker.min.css" rel="stylesheet">

        <!-- Switch CSS -->
        <link href="{{STATIC_ADMIN_URL}}/css/addform/bootstrap-switch.css" rel="stylesheet">

        <!-- Select CSS -->
        <link href="{{STATIC_ADMIN_URL}}/css/addform/bootstrap-select.css" rel="stylesheet">

        <!-- Custom Fonts -->
        <link href="{{STATIC_ADMIN_URL}}/css/font-awesome.min.css" rel="stylesheet" type="text/css">
       
        <!-- DATATABLE STYLE  -->
        <link href="{{STATIC_ASSETS_URL}}/js/dataTable/dataTables.bootstrap.css" rel="stylesheet" />

        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->
    </head>
    <body>

        <div id="wrapper">

            <!-- Navigation -->
            <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
                <div class="navbar-header">
                    <a class="navbar-brand" href="#">Atos</a>
                </div>

                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>

                <ul class="nav navbar-nav navbar-left navbar-top-links">
                    <li><a href="#"><i class="fa fa-home fa-fw"></i> Website</a></li>
                </ul>

                <ul class="nav navbar-right navbar-top-links">
                    <li class="dropdown">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                            <i class="fa fa-user fa-fw"></i> User <b class="caret"></b>
                        </a>
                        <ul class="dropdown-menu dropdown-user">
                            <li><a href="#"><i class="fa fa-user fa-fw"></i> User Profile</a>
                            </li>
                            <li><a href="#"><i class="fa fa-gear fa-fw"></i> Settings</a>
                            </li>
                            <li class="divider"></li>
                            <li><a href="login.html"><i class="fa fa-sign-out fa-fw"></i> Logout</a>
                            </li>
                        </ul>
                    </li>
                </ul>
                <!-- /.navbar-top-links -->

                <div class="navbar-default sidebar" role="navigation">
                    <div class="sidebar-nav navbar-collapse">
                        <ul class="nav" id="side-menu">
                            <li class="sidebar-search">
                                <div class="input-group custom-search-form">
                                    <input type="text" class="form-control" placeholder="Search...">
                                    <span class="input-group-btn">
                                        <button class="btn btn-primary" type="button">
                                            <i class="fa fa-search"></i>
                                        </button>
                                </span>
                                </div>
                                <!-- /input-group -->
                            </li>
                            <li>
                                <a href="/admin/" class="active"><i class="fa fa-dashboard fa-fw"></i> Tableau de bord </a>
                            </li>

                            <li>
                                <a href="/admin/"><i class="fa fa-table fa-fw"></i> Projets </a>
                            </li>

                        </ul>
                    </div>
                </div>
            </nav>

<div id="page-wrapper">
    <div class="row">
        <div class="col-lg-12">
            <h1 class="page-header"> Nouveau projet </h1>
        </div>
        <!-- /.col-lg-12 -->
    </div>
    <!-- /.row -->
  
          
    <div class="row">
    
     <div class='panel panel-success dialog-panel'>
      <div class='panel-heading'>
        <h5>Ajouter un JOB</h5>
      </div>
      <div class='panel-body'>
        <form class='form-horizontal' name="form" id="myForm" method="post" action="" role='form' data-toggle="validator">
          <div class='form-group'>
            <label class='control-label col-md-2 col-md-offset-1' for='id_title'>JOB</label>
            <div class='col-md-8'>
              <div class='col-md-3'>
                <div class='form-group internal'>
                  <input class='form-control' id='id_first_name' placeholder='Job' type='text' name='job_name' required>
                </div>
              </div>
            </div>
          </div>
          <div class="form-group">
            <label class='control-label col-md-2 col-md-offset-1' for='id_title'>Type</label>
            <div class='col-md-8'>
              <div class='col-xs-2'>
                <div class='form-group internal'>
                  <select class='selectpicker form-control show-tick' id='id_title' name="command_type" required>
                    <option selected='selected'>Commande</option>
                    <option>Dummy</option>
                    <option>File watcher</option>
                    <option>Sub table</option>
                  </select>
                </div>
              </div>
              <div class='col-md-7 indent-small'>
                <div class='form-group internal'>
                  <input class='form-control' id='id_last_name' placeholder='Commande (ou ABAP SAP)' type='text' name="command_line" required>
                </div>
              </div>
            </div>
          </div>  

          <div class="form-group" id="server_group">
            <label class='control-label col-md-2 col-md-offset-1' for='id_title'>Condition</label>
            <div class='col-md-9'>
              <div class='col-md-1' id='to_put_cond_after1'>
                <div class='form-group internal' value='cut_from_here'>
                  <select class='selectpicker form-control show-tick' id='condition_title1' name="conditiontitle_1" onchange="Change(this.value, this.id);">
                    <option selected="selected">IN</option>
                    <option>OUT</option>
                    <option>ON</option>
                  </select>
                </div>
              </div>
              <div value='cut_to_here' class='col-md-5 indent-small'>
                <div class='form-group internal'>
                  <input class='form-control' id='firstgroup1' pattern="^Z[a-zA-Z0-9]{13}-TO-Z[a-zA-Z0-9]{13}-(OK|ENDED)$" placeholder='Condition (ZXXXV8Q01NSVN1-TO-ZXXXV8Q01NARR1-ENDED)'  data-error="Format: ZXXXV8Q01NSVN1-TO-ZXXXV8Q01NARR1-ENDED" name="first_group_1" type='text' required>
                  <span class="glyphicon form-control-feedback" aria-hidden="false"></span>
                  <div class="help-block with-errors"></div>
                </div>
              </div>
              <div class='col-md-1 indent-small'>
                <div class='form-group internal'>
                  <input class='form-control' id='cond_odat1' placeholder='ODAT' name="odatcond_1" type='text' required>
                </div>
              </div>
              <div class='col-md-1 indent-small'>
                <div class='form-group internal'>
                  <input class='form-control' id='cond_sign1' placeholder='A/O' name="signcond_1" type='text' required>
                </div>
              </div>
              <div class='col-md-1 indent-small'>
                <input type="image" src="{{STATIC_ASSETS_URL}}/img/close.png" width="27px" style="display: none;" id="delete_cond1" onclick="Delete(this.id, 'server_group'); return false;" />
              </div>
            </div>
          </div>

          <div class="form-group">
            <div class='col-md-offset-3 col-md-4' id='add_server'>
              <a href="#" id="addRow" style="font-family:verdana;"><img src="{{STATIC_ASSETS_URL}}/img/add.png" width="25px"></img> Ajouter une autre condition</a>
            </div>
          </div>

          <div class='form-group' id="variable_group">
            <label class='control-label col-md-2 col-md-offset-1' for='id_title'>Variable</label>
            <div class='col-md-8'>
              <div class='col-md-3'>
                <div class='form-group internal'>
                  <input class='form-control' id='var_name1' placeholder='Nom' name="name_var_1" type='text' required>
                </div>
              </div>
              <div class='col-md-6 indent-small'>
                <div class='form-group internal'>
                  <input class='form-control' id='var_value1' placeholder='Valeur' name="value_var_1" type='text' required>
                </div>
              </div>
              <div class='col-md-1 indent-small'>
                <input type="image" src="{{STATIC_ASSETS_URL}}/img/close.png" width="25px" style="display: none;" id="delete_varb1" onclick="Delete(this.id, 'variable_group'); return false;" />
              </div>
            </div>
          </div>

          <div class="form-group">
            <div class='col-md-offset-3 col-md-4'>
              <a href="#" id="addRow1" style="font-family:verdana;"><img src="{{STATIC_ASSETS_URL}}/img/add.png" width="25px"></img> Ajouter une autre variable</a>
            </div>
          </div>

          <div class='form-group' id="quant_group">
            <label class='control-label col-md-2 col-md-offset-1' for='id_title'>Ressource</label>
            <div class='col-md-8'>
              <div class='col-md-3'>
                <div class='form-group internal'>
                  <input class='form-control' id='quant_name1' placeholder='Nom' name="name_quant_1" type='text' required>
                </div>
              </div>
              <div class='col-md-1 indent-small'>
                <input type="image" src="{{STATIC_ASSETS_URL}}/img/close.png" width="25px" style="display: none;" id="delete_qant1" onclick="Delete(this.id, 'quant_group'); return false;" />
              </div>
            </div>
          </div>

          <div class="form-group">
            <div class='col-md-offset-3 col-md-4'>
              <a href="#" id="addRow2" style="font-family:verdana;"><img src="{{STATIC_ASSETS_URL}}/img/add.png" width="25px"></img> Ajouter une autre ressource</a>
            </div>
          </div>

          <div class='form-group'>
            <label class='control-label col-md-2 col-md-offset-1' for='id_service'>Planning</label>
            <div class='col-md-9'>

            <div class='col-md-3'>
              <div class='form-group internal'>
              <select class="selectpicker form-control show-menu-arrow" multiple data-selected-text-format="count > 3" data-actions-box="true" id='id_service' name="planning_days" required>
                <option>Lundi</option>
                <option>Mardi</option>
                <option>Mercredi</option>
                <option>Jeudi</option>
                <option>Vendredi</option>
                <option>Samedi</option>
                <option selected="selected">Dimanche</option>
              </select>
              </div>
            </div>

            <label class='control-label col-md-2' for='begin_checkout'>Début</label>
            <div class='col-md-2 indent-small'>
              <div class='form-group internal input-group'>
                <div class="input-group bootstrap-timepicker timepicker">
                  <input id='begin_checkout' type="text" placeholder='H. de début' class="form-control input-small" name="begin_date" >
                  <span class="input-group-addon"><i class="glyphicon glyphicon-time"></i></span>
                </div>
              </div>
            </div>

            <label class='control-label col-md-2' for='final_checkout'>Plus tard</label>
            <div class='col-md-2 indent-small'>
              <div class='form-group internal input-group'>
                <div class="input-group bootstrap-timepicker timepicker">
                  <input id='final_checkout' type="text" placeholder='H. au plus tard' class="form-control input-small" name="final_date" >
                  <span class="input-group-addon"><i class="glyphicon glyphicon-time"></i></span>
                </div>
              </div>
            </div>


            </div>
          </div>

          <div class='form-group'>
            <label class='control-label col-md-2 col-md-offset-1' for='id_cyclic'>Cyclique</label>
            <div class='col-md-8'>
            <div class='col-md-2 indent-small' id='to_put_after_cyclic'>
            <input id='id_cyclic' type='checkbox' name='cyclic' data-size='normal' data-on-text="Oui" data-off-text='Non'>
            </div>
            </div>
          </div>
          
          <div class="form-group">
            <label class='control-label col-md-2 col-md-offset-1' for='id_confman'>Conf. Manuelle</label>
            <div class='col-md-8'>
            <div class='col-md-1 indent-small'>
              <input id='id_confman' type='checkbox' name='manual_conf' data-size='normal' data-on-text="Oui" data-off-text='Non'>
            </div>
            <label class='control-label col-md-3 col-md-offset-1' for='id_notspec'>Notification Spéc.</label>
            <div class='col-md-1 indent-small'>
            <input id='id_notspec' type='checkbox' name='not_spec' data-size='normal' data-on-text="Oui" data-off-text='Non'>
            </div>
            </div>
          </div>

          <div class='form-group'>
            <label class='control-label col-md-2 col-md-offset-1' for='id_comments'>Description</label>
            <div class='col-md-7'>
              <textarea class='form-control' id='id_comments' name='description' placeholder='Ajouter une description' rows='3'></textarea>
            </div>
          </div>
          <div class='form-group'>
            <div class='col-md-offset-3 col-md-4'>
              <button class='btn-lg btn-success' type='submit' name='btn' value='ok'>Valider</button>
            </div>
            <div class='col-md-3'>
              <button class='btn-lg btn-danger' style='float:right' type='submit' name='btn' value='cancel'>Annuler</button>
            </div>
          </div>
        </form>
      </div>

    </div>

  </div>
  <!-- /.row -->

</div>
<!-- /#page-wrapper -->

 </div>
<!-- /#wrapper -->

<!-- jQuery -->
<script type="text/javascript" src="{{STATIC_ASSETS_URL}}/jquery/jquery-2.1.4.min.js" charset="UTF-8"></script>
        
<!-- Bootstrap Core JavaScript -->
<script type="text/javascript" src="{{STATIC_ASSETS_URL}}/js/bootstrap.min.js"></script>

<!-- Metis Menu Plugin JavaScript -->
<script src="{{STATIC_ADMIN_URL}}/js/metisMenu.min.js"></script>

<!-- Custom Theme JavaScript -->
<script src="{{STATIC_ADMIN_URL}}/js/startmin.js"></script>



<!-- Timepicker JS -->
<script type="text/javascript" src="{{STATIC_ADMIN_URL}}/js/addform/bootstrap-timepicker.min.js"></script>

<!-- Switch JS -->
<script type="text/javascript" src="{{STATIC_ADMIN_URL}}/js/addform/bootstrap-switch.js"></script>


<!-- Select JS -->
<script type="text/javascript" src="{{STATIC_ADMIN_URL}}/js/addform/bootstrap-select.js"></script>

<!-- Validator JS -->
<script type="text/javascript" src="{{STATIC_ADMIN_URL}}/js/addform/validator.js"></script>


<script type="text/javascript">

    function Change(value, id) {
      var number = parseInt(id.substring(15, 17));
      if(value=='OUT')
      { 
        document.getElementById("firstgroup"+String(number)).placeholder = "Condition";
        document.getElementById("cond_sign"+String(number)).placeholder = "Sign";
        document.getElementById("cond_odat"+String(number)).style.display= "";
        document.getElementById("cond_sign"+String(number)).style.display= "";

        $('#do_cond'+String(number)).slideToggle(function() {
          $(this).remove();
        });

      }
      else if(value=='IN') 
      {
        document.getElementById("firstgroup"+String(number)).placeholder = "Condition";
        document.getElementById("cond_sign"+String(number)).placeholder = "A/O";
        document.getElementById("cond_odat"+String(number)).style.display= "";
        document.getElementById("cond_sign"+String(number)).style.display= "";

        $('#do_cond'+String(number)).slideToggle(function() {
          $(this).remove();
        });

      }

      else if(value=='ON')
      {
        var $person = $('#to_put_cond_after'+String(number)).last();
        var html_to_put = "<div class='col-md-1 indent-small' id='do_cond"+String(number)+"'>"+"\n"+
                          "<div class='form-group internal'>"+"\n"+
                          "<select class='selectpicker form-control show-tick' id='do_cond_title"+String(number)+"' name='docondtitle_"+String(number)+"'>"+"\n"+
                          "<option selected='selected'>NOK</option>"+"\n"+
                          "<option>OK</option>"+"\n"+
                        "</select>"+"\n"+
                      "</div>"+"\n"+
                    "</div>";
        // insert the new person after the last one
        $person.after($(html_to_put));
        // get the new person
        var $new = $('#do_cond'+String(number)).last();
        // hide it
        $new.hide();

        // fade it in
        $new.show(500);

        $("#do_cond_title"+String(number)).selectpicker({
          });

        document.getElementById("firstgroup"+String(number)).placeholder = "Condition";
        document.getElementById("cond_sign"+String(number)).placeholder = "Sign";
        document.getElementById("cond_odat"+String(number)).style.display= "";
        document.getElementById("cond_sign"+String(number)).style.display= "";
      }
    };

    function Delete(id, place) {
      var number = parseInt(id.substring(11, 13));
      var element = document.getElementById(place+String(number));
      if (number!=1)
      {
        if (element==null)
        {
          //$('#'+place).slideToggle("slow");
          $('#'+place).slideToggle( "slow", function() {
            $(this).remove();
          });
          //document.getElementById(place).remove();
          var element2 = document.getElementById(place+String(number-1));
          while (element2==null) {
              number = number-1;
              element2 = document.getElementById(place+String(number-1));
          }
          $('#'+place+String(number-1)).attr("id", place);
        }
        else
        {
          $('#'+place+String(number)).slideToggle( "slow", function() {
            $(this).remove();
          });
          //$('#'+place+String(number)).slideToggle("slow");
          //element.remove();
        } 
      }     
    };

  $(document).ready(function(){

        $("#condition_title1").selectpicker({
          });

        $("#id_title").selectpicker({
          });

        $("#id_service").selectpicker({
           selectAllText: 'Tout',
           noneSelectedText: 'Choisir le/les jour(s)',
           one_item_selected: 'Jour selectionné',
           n_items_selected: 'Jours selectionnés',
           deselectAllText:'Aucun'
          });
        

//        $('.multiselect').multiselect({
//            includeSelectAllOption: true,
//            buttonClass: 'form-control',
//            selectAllName: 'SelectAll',
//            selectAllValue: 'all',
//            selectAllText: 'Tous les jours',
//            nonSelectedText: 'Choisir le/les jour(s)',
//            nSelectedText: ' Jours selectionnées',
//            allSelectedText: 'Tous les jours'
//          });

        $('#begin_checkout').timepicker({
                minuteStep: 1,
                appendWidgetTo: 'body',
                showMeridian: false,
                defaultTime: false
            });
        $('#final_checkout').timepicker({
                minuteStep: 1,
                appendWidgetTo: 'body',
                showMeridian: false,
                defaultTime: false
            });

        $("[name='cyclic']").bootstrapSwitch({
          onSwitchChange: function (event, state) {
             if(state==true){
                var $person = $('#to_put_after_cyclic').last();
                var html_to_put = "<div class='col-md-5 indent-small' id='int_cycle'>"+"\n"+
                                  "<input class='form-control' placeholder='Interval du cycle (en minutes)' name='cyclic_int' type='number' required>"+"\n"+
                                  "</div>";
                // insert the new person after the last one
                $person.after($(html_to_put));
                // get the new person
                var $new = $('#int_cycle').last();
                // hide it
                $new.hide();

                // fade it in
                $new.show(500);
                        
                //document.getElementById("int_cycle").style.display = ""; 
             }
             else{
                 $("#int_cycle").slideToggle( "slow", function() {
                   $(this).remove();
                 });
                //document.getElementById("int_cycle").style.display = "none";             
             }
           }
          });

        $("[name='manual_conf']").bootstrapSwitch();
        $("[name='not_spec']").bootstrapSwitch();

        $('#addRow').click(function(){
            // get the last person and html html
            var $person = $('#server_group').last();
            var person = $person.html();
            // find the number
            var index_title = person.indexOf('condition_title');
            var index_title1 = person.indexOf('condition_title');
            var index_to_put_cond_after = person.indexOf('to_put_cond_after');
            var index_firstgroup = person.indexOf('firstgroup');
            var index_odat = person.indexOf('cond_odat');
            var index_sign = person.indexOf('cond_sign');            
            var index_delete_cond = person.indexOf('delete_cond');

            var number = parseInt(person.substr(index_title+15, 2));
            var next = number+1;
            // replace the number
            
            $('#server_group').attr("id", 'server_group'+String(number));

            if (next>9)
            {
              if (next==10)
              {
                // for firstname
                
                person = person.substr(0, index_title1+15) + String(next) + person.substr(index_title1+16);
                person = person.substr(0, index_title+16) + String(next) + person.substr(index_title+17);
                index_to_put_cond_after = person.indexOf('to_put_cond_after');
                person = person.substr(0, index_to_put_cond_after+17) + String(next) + person.substr(index_to_put_cond_after+18);
                index_firstgroup = person.indexOf('firstgroup');
                person = person.substr(0, index_firstgroup+10) + String(next) + person.substr(index_firstgroup+11);
                index_odat = person.indexOf('cond_odat');
                person = person.substr(0, index_odat+9) + String(next) + person.substr(index_odat+10);
                index_sign = person.indexOf('cond_sign');
                person = person.substr(0, index_sign+9) + String(next) + person.substr(index_sign+10);
                index_delete_cond = person.indexOf('delete_cond');
                person = person.substr(0, index_delete_cond+11) + String(next) + person.substr(index_delete_cond+12);
              }
              else
              {
                // for firstname
                person = person.substr(0, index_title1+15) + String(next) + person.substr(index_title1+17);
                person = person.substr(0, index_title+15) + String(next) + person.substr(index_title+17);
                person = person.substr(0, index_to_put_cond_after+17) + String(next) + person.substr(index_to_put_cond_after+19);
                person = person.substr(0, index_firstgroup+10) + String(next) + person.substr(index_firstgroup+12);
                person = person.substr(0, index_odat+9) + String(next) + person.substr(index_odat+11);
                person = person.substr(0, index_sign+9) + String(next) + person.substr(index_sign+11);
                person = person.substr(0, index_delete_cond+11) + String(next) + person.substr(index_delete_cond+13);             
              }
            }
            else 
            {
            // for firstname
            person = person.substr(0, index_title1+15) + String(next) + person.substr(index_title1+16);
            person = person.substr(0, index_title+15) + String(next) + person.substr(index_title+16);
            person = person.substr(0, index_to_put_cond_after+17) + String(next) + person.substr(index_to_put_cond_after+18);
            person = person.substr(0, index_firstgroup+10) + String(next) + person.substr(index_firstgroup+11);
            person = person.substr(0, index_odat+9) + String(next) + person.substr(index_odat+10);
            person = person.substr(0, index_sign+9) + String(next) + person.substr(index_sign+10);
            person = person.substr(0, index_delete_cond+11) + String(next) + person.substr(index_delete_cond+12);
            }
            

            var cut_from = person.indexOf('cut_from_here');
            var cut_to = person.indexOf('cut_to_here');
            var html_to_put = "<select class='selectpicker form-control show-tick' id='condition_title"+String(next)+"'"+
                                 " onchange='Change(this.value, this.id);' style='font-size: 12px;'>"+"\n"+
                                 "<option  selected='selected'>IN</option>"+"\n"+
                                 "<option>OUT</option>"+"\n"+
                                 "<option>ON</option>"+"\n"+
                                 "</select>"+"\n"+
                                 "</div>"+"\n"+
                                 "</div>"+"\n";
            person = person.substr(0, cut_from+16)  + String(html_to_put)  + person.substr(cut_to-12);
            // insert the new person after the last one
            $person.after($('<div class="form-group" id="server_group">'+person+'</div>'));    
            // get the new person
            var $new = $('#server_group').last();
            // hide it
            $new.hide();
            setTimeout(function () 
            {
               $('#server_group1')[0].scrollIntoView( true );
            }, 0.00000001)
            // reset the values
            $new.find('input, select').val('');
            // fade it in
            $new.show(1000);
            //$new.slideDown("slow");
            document.getElementById("delete_cond"+String(next)).style.display= "";


           $('#condition_title'+String(next)).attr("name", "conditiontitle_"+String(next));
           $('#do_cond_title'+String(next)).attr("name", "docondtitle_"+String(next));
           $('#firstgroup'+String(next)).attr("name", "first_group_"+String(next));
           $('#secondgroup'+String(next)).attr("name", "second_group_"+String(next));
           $('#cond_odat'+String(next)).attr("name", "odatcond_"+String(next));
           $('#cond_sign'+String(next)).attr("name", "signcond_"+String(next));
           $('#cond_sign'+String(next)).attr("placeholder", "A/O");

            $("#condition_title"+String(next)).selectpicker({
              });

            $("#do_cond_title"+String(next)).selectpicker({
              });
         });

        $('#addRow1').click(function(){
            // get the last person and html html
            var $person = $('#variable_group').last();
            var person = $person.html();
            // find the number
            var index_varname = person.indexOf('var_name');
            var index_varvalue = person.indexOf('var_value');
            var index_delete_cond = person.indexOf('delete_varb');

            var number = parseInt(person.substr(index_varname+8, 2));
            // replace the number
            $('#variable_group').attr("id", 'variable_group'+String(number));
            var next = number+1;

            if (next>9)
            {
              if (next==10)
              {
                // for firstname
                person = person.substr(0, index_varname+8) + String(next) + person.substr(index_varname+9);
                person = person.substr(0, index_varvalue+10) + String(next) + person.substr(index_varvalue+11);
                index_delete_cond = person.indexOf('delete_varb');
                person = person.substr(0, index_delete_cond+11) + String(next) + person.substr(index_delete_cond+12);
              }
              else
              {
                // for firstname
                person = person.substr(0, index_varname+8) + String(next) + person.substr(index_varname+10);
                person = person.substr(0, index_varvalue+9) + String(next) + person.substr(index_varvalue+11);
                person = person.substr(0, index_delete_cond+11) + String(next) + person.substr(index_delete_cond+13);              
              }
            }
            else 
            {
            // for firstname
            person = person.substr(0, index_varname+8) + String(next) + person.substr(index_varname+9);
            person = person.substr(0, index_varvalue+9) + String(next) + person.substr(index_varvalue+10);
            person = person.substr(0, index_delete_cond+11) + String(next) + person.substr(index_delete_cond+12);
            }


            $person.after($('<div class="form-group" id="variable_group">'+person+'</div>'));            
            // get the new person
            var $new = $('#variable_group').last();
            // hide it
            $new.hide();
            setTimeout(function () 
            {
               $('#variable_group1')[0].scrollIntoView( true );
            }, 0.00000001);
            // reset the values
            $new.find('input, select').val('');
            // fade it in
            $new.show(1000);

            document.getElementById("delete_varb"+String(next)).style.display= "";

           $('#var_name'+String(next)).attr("name", "name_var_"+String(next));
           $('#var_value'+String(next)).attr("name", "value_var_"+String(next));

         });

        $('#addRow2').click(function(){
            // get the last person and html html
             
            var $person = $('#quant_group').last();
            var person = $person.html();
            // find the number
            var quant_name = person.indexOf('quant_name');
            var index_delete_cond = person.indexOf('delete_qant');

            var number = parseInt(person.substr(quant_name+10, 2));
            var next = number+1;
            // replace the number
            $('#quant_group').attr("id", 'quant_group'+String(number));
            // for firstname

            var next = number+1;

            if (next>9)
            {
              if (next==10)
              {
                // for firstname
                person = person.substr(0, quant_name+10) + String(next) + person.substr(quant_name+11);
                index_delete_cond = person.indexOf('delete_qant');
                person = person.substr(0, index_delete_cond+11) + String(next) + person.substr(index_delete_cond+12);
              }
              else
              {
                // for firstname
                person = person.substr(0, quant_name+10) + String(next) + person.substr(quant_name+12);
                person = person.substr(0, index_delete_cond+11) + String(next) + person.substr(index_delete_cond+13);              
              }
            }
            else 
            {
            // for firstname
            person = person.substr(0, quant_name+10) + String(next) + person.substr(quant_name+11);
            person = person.substr(0, index_delete_cond+11) + String(next) + person.substr(index_delete_cond+12);
            }

            

            // insert the new person after the last one
            $person.after($('<div class="form-group" id="quant_group">'+person+'</div>'));            
            // get the new person
            var $new = $('#quant_group').last();
            // hide it
            $new.hide();
            setTimeout(function () 
            {
               $('#quant_group1')[0].scrollIntoView( true );
            }, 0.00000001);
            // reset the values
            $new.find('input, select').val('');
            // fade it in
            $new.show(1000);
            document.getElementById("delete_qant"+String(next)).style.display= "";

            $('#quant_name'+String(next)).attr("name", "name_quant_"+String(next));

         });
    })
</script>

</body>
</html>
